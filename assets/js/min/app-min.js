!function(e,t,s){"use strict";var n=new Clock(t.querySelector("#time span")),i=function(){var e=0,s=0,i=!1,o=180,r=230,a={type:"x,y",edgeResistance:1,bounds:".game-board",throwProps:!0},l={professions:[],addedIndexes:[],get:function(){for(var e=new randomArrayIndex(gameData);this.professions.length<5;){var t=e.get();this.professions.push(gameData[t])}return this.professions},reset:function(){this.professions=[],this.addedIndexes=[]}},c=function(e){for(var t=new randomArrayIndex(e);t.addedIndexes.length<5;){var s=t.get();e[s].element.style.left=180*(t.addedIndexes.length-1)+"px",h(e[s].element)}},d=t.querySelector(".game-board"),h=function(e){d.appendChild(e)},u=t.querySelector("#start-game");return{professions:null,bindEvents:function(){u.addEventListener("click",this.startGame.bind(this),!0)},unbindEvents:function(){u.removeEventListener("click",this.startGame.bind(this),!0)},init:function(){this.professions=l.get(),this.professionsCollection=new ProfessionsCollection(this.professions);for(var e=0;e<this.professionsCollection.elements.length;e++)h(this.professionsCollection.elements[e]);this.descriptionsCollection=new DescriptionsCollection(this.professions),c(this.descriptionsCollection.descriptions)},makeDraggable:function(e){var s=this,n=100;a.onDrag=function(e){[].forEach.call(s.professionsCollection.elements,function(e){this.hitTest(e,n)?e.classList.add("hover"):e.classList.remove("hover")}.bind(this))},a.onDragEnd=function(e){var i=t.querySelectorAll(".hover").length;[].forEach.call(s.professionsCollection.elements,function(e){this.hitTest(e,n)&&1===i&&TweenLite.to(this.target,.5,{x:Math.round(this.target._gsTransform.x/o)*o,y:-230,delay:.1,ease:Power2.easeInOut,onComplete:function(){s.cardHasBeenPlaced(e,this)}.bind(this)})}.bind(this))},Draggable.create(e,a)},cardHasBeenPlaced:function(e,t){console.log("cardHasBeenPlaced"),this.checkAnswer(e,t.target),t.disable(),setTimeout(function(){t.target.classList.add("disabled"),t.target.querySelector("h3").innerHTML=e.getAttribute("data-pair"),e.style.display="none"},500)},startGame:function(){i&&this.resetGame(),n.start(),this.turnCard(),i=!0},stopGame:function(){setTimeout(function(){t.body.classList.add("game-finished")},500),n.stop(),i=!1},turnCard:function(){var e=this.descriptionsCollection.turnCard();this.makeDraggable(e.element)},checkAnswer:function(t,n){s++,t.getAttribute("data-pair")===n.getAttribute("data-pair")?(e++,n.classList.add("correct")):n.classList.add("wrong"),5===s?this.stopGame():this.turnCard()},resetGame:function(){s=0;for(var e=d.childNodes.length-1;e>=0;e--)d.childNodes[e].remove();t.body.classList.remove("game-finished"),n.stop(),n.reset(),this.unbindEvents(),l.reset(),this.professionsCollection=null,this.descriptionsCollection=null,this.init()}}}();e.MatchMaker=i,i.bindEvents(),i.init()}(window,document);